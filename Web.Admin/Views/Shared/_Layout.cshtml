<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>MBAC Nationals :: @ViewBag.Year</title>
    <base href="/Setup" />
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    @Styles.Render("~/Content/bootstrap/base")
    @Styles.Render("~/Content/bootstrap/theme")
</head>
<body>
    <div class="container" data-ng-app="app">
        <div class="row">
            <div class="col-md-3">
                <div class="row">
                    <a href="~/"><img src="~/Content/Images/mbac_logo.png" /></a>
                </div>
                <div class="row">
                    @Html.Partial("_LoginPartial")
                </div>
                <ul>                    
                    @if ((User.IsInRole("Admin") || User.IsInRole("Host")) && !string.IsNullOrWhiteSpace(ViewBag.Year))
                    {
                        <li>
                            @Html.ActionLink("Reports", "Reports", "Admin", new { year = ViewBag.Year }, null)
                        </li>
                    }
                    @if ((User.IsInRole("Admin") || User.IsInRole("Host")) && !string.IsNullOrWhiteSpace(ViewBag.Year))
                    {
                        <li>
                            @Html.ActionLink("Sponsors", "List", "Sponsors", new { year = ViewBag.Year }, null)
                        </li>
                    }
                    @if ((User.IsInRole("Admin") || User.IsInRole("ScoreEntry")) && !string.IsNullOrWhiteSpace(ViewBag.Year))
                    {
                        <li>
                            @Html.ActionLink("Score Entry", "Entry", "Scores", new { year = ViewBag.Year }, null)
                        </li>
                    }
                    @if (User.Identity.Name.Equals("Chad", StringComparison.OrdinalIgnoreCase))
                    {
                        <li>
                            @Html.ActionLink("Rebuild Read Models", "Rebuild", "Admin")
                        </li>
                    }
                </ul>
            </div>
            <div class="col-md-9">
                <div class="row">
                    @* TODO: Move into proper nav bootstrap elements *@
                    @Html.Partial("_AdminMenuPartial")
                </div>
                <div class="row">
                    <img src="~/Content/Images/header_image.jpg" style="width:100%; top: -5px; position:relative;" />
                </div>
            </div>
        </div>

        @RenderBody()

        <!-- Site footer -->
        <div class="footer">
            <p>Site Design &copy; 2013-@System.DateTime.Now.Year Charlene McIvor and Chad Hurd</p>
            <ul>
                @{
                    var @spacer = " - ";
                }
                @if ((User.IsInRole("Admin") || User.IsInRole("Host")) && !string.IsNullOrWhiteSpace(ViewBag.Year))
                {
                    @spacer @Html.ActionLink("Reports", "Reports", "Admin", new { year = ViewBag.Year }, null)
                }
                @if ((User.IsInRole("Admin") || User.IsInRole("Host")) && !string.IsNullOrWhiteSpace(ViewBag.Year))
                {
                    @spacer @Html.ActionLink("Sponsors", "List", "Sponsors", new { year = ViewBag.Year }, null)
                }
                @if ((User.IsInRole("Admin") || User.IsInRole("ScoreEntry")) && !string.IsNullOrWhiteSpace(ViewBag.Year))
                {
                    @spacer @Html.ActionLink("Score Entry", "Entry", "Scores", new { year = ViewBag.Year }, null)
                }
                @if (User.Identity.Name.Equals("Chad", StringComparison.OrdinalIgnoreCase))
                {
                    @spacer @Html.ActionLink("Rebuild Read Models", "Rebuild", "Admin")
                }
                @spacer
            </ul>
        </div>

    </div>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/custom")
    @Scripts.Render("~/bundles/bootstrap")
    @Scripts.Render("~/bundles/angular")
    @Scripts.Render("~/bundles/app")
    @RenderSection("scripts", required: false)
    <script src="~/Scripts/FileSaver.js"></script>
</body>
</html>
